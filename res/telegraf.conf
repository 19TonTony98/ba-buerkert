# Telegraf Configuration

# Global tags can be specified here
[global_tags]
  # For example:
  # environment = "production"

# Configuration for telegraf agent
[agent]
  interval = "10s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "10s"
  flush_jitter = "0s"
  precision = ""
  debug = false
  quiet = false
  logfile = ""
  hostname = ""
  omit_hostname = false

# Configuration for output plugins
[[outputs.influxdb_v2]]
  ## The URLs of the InfluxDB cluster nodes.
  ##
  ## Multiple URLs can be specified for a single cluster, only ONE of the
  ## urls will be written to each interval.


  ## Token for authentication.
  token = "HU2pUPKNK0bI2UiaVBqVk0mhM-rMhrvZxlTfKcO4H8KHwu8VUCf8ZOHqhz0aooPsJwTOCMX12a5FoUARxJ8mZw=="

  ## Organization is the name of the organization you wish to write to; must exist.
  organization = "HSWT"

  ## Destination bucket to write into.
  bucket = "sample-bucket"

# Configuration for input plugins
[[inputs.opcua_listener]]
  name = "opcua_listener"
  endpoint = "opc.tcp://10.154.4.38:4840/freeopcua/server/"

  [[inputs.opcua_listener.group]]
    name = "15"
    namespace = "2"
    identifier_type = "i"

    [[inputs.opcua_listener.group.nodes]]
      name = "Temperatur"
      identifier = "3"
      default_tags = { sensor_id = "I1", display = "VAR1" }

    [[inputs.opcua_listener.group.nodes]]
      name = "Temperatur"
      identifier = "4"
      default_tags = { sensor_id = "I2", display = "VAR2" }

    [[inputs.opcua_listener.group.nodes]]
      name = "Druck"
      identifier = "5"
      default_tags = { sensor_id = "I3", display = "VAR3" }

  [[inputs.opcua_listener.group]]
    name = "15"
    namespace = "3"
    identifier_type = "i"

    [[inputs.opcua_listener.group.nodes]]
      name = "Druck"
      identifier = "3"
      default_tags = { sensor_id = "O1", display = "VAR7" }

    [[inputs.opcua_listener.group.nodes]]
      name = "Druck"
      identifier = "4"
      default_tags = { sensor_id = "O2", display = "VAR8" }
